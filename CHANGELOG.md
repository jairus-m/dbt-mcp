# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
and is generated by [Changie](https://github.com/miniscruff/changie).


## v1.6.0 - 2025-12-11
### Enhancement or New Feature
* Add ability to get model lineage via the cli. 
### Under the Hood
* Add Fusion tools to ToolName enum

## v1.5.2 - 2025-12-10
### Under the Hood
* Add search tool to ToolName enum

## v1.5.1 - 2025-12-09
### Under the Hood
* Upgrade python MCP SDK
* Add x-dbt-partner-source header to discovery tools
* Extend JSON encoder to handle PyArrow time, timedelta, and binary types in semantic layer query result
* Decouple tool registration from ToolName

## v1.5.0 - 2025-12-05
### Enhancement or New Feature
* Added explicit allowlist system for tool configuration, enabling fine-grained control over which tools are available.
### Under the Hood
* Automate Toolset and Tools documentation generation into README
* Test TOOLSET_TO_DISABLE_ATTR and TOOLSET_TO_ENABLE_ATTR
* Python Cursor rule and stylistic guidelines 
### Bug Fix
* Fix discovery tool prompt tool parameters
* Fix JSON serialization error when querying metrics that return Decimal values from the dbt Semantic Layer

## v1.4.0 - 2025-12-03
### Enhancement or New Feature
* Get resource details for search resources
* stderr logger configuration with formatting and log lever override
### Under the Hood
* Rename keyword search tool
* Refactor discovery fetchers to share pagination
* Override js-yaml version
* Update gitignore
* Remove pandas dependency
* Use httpx for semantic layer requests
* Use httpx for discovery requests
* Remove search tool
* Fix semantic layer client blocking requests
### Bug Fix
* Fix lsp binary detection on Windows

## v1.3.0 - 2025-11-18
### Enhancement or New Feature
* Extend get_job_run_error to support optional warnings
* Add search tools to discovery toolset
* Refactor proxied tools. Enable new search tools.
### Under the Hood
* Add discovery tool context
* Update d2 diagram with get_all_sources/get_source_details
* Add Semantic Layer tools context

## v1.2.0 - 2025-11-12
### Enhancement or New Feature
* Add get_source_details tool to retrieve column-level information for dbt sources, providing feature parity with get_model_details
* Return SL query results in ISO timestamp format rather than Unix timestamp
### Under the Hood
* Undo removal of .env.example file
### Bug Fix
* correctly apply config.disable_tools when registering lsp tools

## v1.1.0 - 2025-11-03
### Enhancement or New Feature
* This adds the get all sources tool.
* add auto-disable and better validation of MCP settings.
A whole bunch of tests needed to change because of this
Created fixture for allowing the default behavior
to assume all required fields for settings are fully set

* Add list_saved_queries tool to the Semantic Layer, enabling discovery of predefined MetricFlow queries via GraphQL API. This allows AI agents to list and search saved queries with their associated metrics, dimensions, and filters.
### Under the Hood
* Abstract LSP client and LSP connection via providers.
* Add version number guidelines to contributing.md
* Make release version determination automatic based on changie changelog entries. The workflow now defaults to 'auto' mode which uses 'changie batch auto' to
### Bug Fix
* Minor update to the instruction for LSP tool

## v1.0.0 - 2025-10-20
### Enhancement or New Feature
* Incroduce support for fusion LSP
### Under the Hood
* Add support for Python debugger
* Update pyproject.toml including development status
* Add example for aws_strands_agent
### Bug Fix
* Exclude Python 3.14 for now as pyarrow hasn't released wheels yet

## v0.10.3 - 2025-10-08
### Under the Hood
* Improved retry logic and post project selection screen
* Avoid double counting in usage tracking proxied tools
* Categorizing ToolCallErrors

## v0.10.2 - 2025-10-08
### Enhancement or New Feature
* Improved oauth error handling
* Remove oauth env var feature flag. Enable oauth broadly.
### Under the Hood
* Improved logging for development
* Updating prompts to include examples to avoid bad parameter generation
* Remove DBT_HOST prefix
* Update usage tracking with new fields
* Write .user.yml if it does not exist
* Changed UsageTracker to a protocol

## v0.10.1 - 2025-10-02
### Bug Fix
* Fix get_job_run_error truncated log output

## v0.10.0 - 2025-10-01
### Enhancement or New Feature
* Add get_job_run_error to Admin API tools

## v0.9.1 - 2025-09-30
### Under the Hood
* Reorganize code and add ability to format the arrow table differently

## v0.9.0 - 2025-09-30
### Enhancement or New Feature
* Adding the dbt codegen toolset.
### Under the Hood
* Updates README with new tools
* Fix .user.yml error with Fusion

## v0.8.4 - 2025-09-29
### Enhancement or New Feature
* Allow doc files to skip changie requirements
### Under the Hood
* Upgrade @vitejs/plugin-react
* Add ruff lint config to enforce Python 3.9+ coding style
* Opt-out of usage tracking with standard dbt methods

## v0.8.3 - 2025-09-24
### Under the Hood
* Rename SemanticLayerConfig.service_token to SemanticLayerConfig.token
### Bug Fix
* Fix Error handling as per native MCP error spec

## v0.8.2 - 2025-09-23
### Enhancement or New Feature
* Use `dbt --help` to identify binary type
* Increase dbt CLI timeout default
### Under the Hood
* Implement SemanticLayerClientProvider
### Bug Fix
* Update how we identify CLIs

## v0.8.1 - 2025-09-22
### Under the Hood
* Create ConfigProvider ABC

## v0.8.0 - 2025-09-22
### Enhancement or New Feature
* Allow creating pre-releases
* Return compiled code in get_model_details
### Under the Hood
* Handle Claude Desktop running multiple MCP server instances
* Add docs for using the MCP server with google ADK and dbt-core
* Add search string to SL metadata queries
* Improve parameters in query_metrics examples
* Reduce token usage in `get_job_run_details` response by removing debug param and unnecessary logs
* Automatically refresh oauth token
* Improve dbt platform context mcp.yml parsing
* Add PR and issue templates
* Address claude desktop re-triggering oauth on exit
* Turning off caching for static files
### Bug Fix
* Add account id to dbt platform context

## v0.7.0 - 2025-09-09
### Enhancement or New Feature
* Add tools to retrieve exposure information from Disco API
### Under the Hood
* Expect string sub in oauth JWT
* Using sync endpoints for oauth FastAPI server
* Fix release pipeline

## v0.6.2 - 2025-09-08
### Enhancement or New Feature
* Adding the ability to return the config.meta attribute from list metrics to give the LLM more context
* Oauth initial implementation
* Fix #251 - Add flag for no color + ability to detect binary type
### Under the Hood
* Add docs for using the MCP server with Pydantic AI
* Don't run mypy on examples

## v0.6.1 - 2025-08-28
### Enhancement or New Feature
* Add support for --vars flag
* Allow headers in AdminApiConfig
### Under the Hood
* Remove redundant and outdated documentation

## v0.6.0 - 2025-08-22
### Under the Hood
* Update docs with new tools
* Using streamable http for SQL tools
* Correctly handle admin API host containing protocol prefix

## v0.5.0 - 2025-08-20
### Enhancement or New Feature
* Add support for --full-refresh flag
* Adds a new tool to get model health (last run, tests, source freshness) from discovery API
* Add operational/admin tools to interact with the dbt platform
### Under the Hood
* LangGraph create_react_agent example
* Make model_name optional for more discovery tools
* Update example with OpenAI to show tool calls
### Bug Fix
* Fix for timeout on Windows

## v0.4.2 - 2025-08-13
### Enhancement or New Feature
* Add default --limit to show tool
### Under the Hood
* Define toolsets
### Bug Fix
* Fix the prompt to ensure grain is passed even for non-time group by"

## v0.4.1 - 2025-08-08
### Under the Hood
* Upgrade dbt-sl-sdk

## v0.4.0 - 2025-08-08
### Enhancement or New Feature
* Tool policies 
* Added Semantic Layer tool to get compiled sql
### Under the Hood
* Fix JSON formatting in README
* Document dbt Copilot credits relationship
### Bug Fix
* Make model_name of get_model_details optional

## v0.3.0 - 2025-08-05
### Enhancement or New Feature
* Add ToolAnnotations
* Add alias field to GET_MODEL_DETAILS GraphQL query
### Under the Hood
* Test remote tool equality
* Fix initialization integration test
* Refactor README
* Rename Remote Tools to SQL Tools
* Document Remote MCP
* Improved Remote MCP instructions 
### Bug Fix
* Apply dbt_cli_timeout to all dbt commands

## v0.2.20 - 2025-07-25
### Enhancement or New Feature
* Allow for disabling CLI tools
### Under the Hood
* Update codeowners
* Improve DISABLE_TOOLS configuration
* Remote MCP example
* Add unit tests for env vars combinations
* Add instructions for Claude Code in README
* Add new example for OpenAI + HTTP Streamable MCP

## v0.2.19 - 2025-07-22
### Under the Hood
* Create list of tool names

## v0.2.18 - 2025-07-22
### Enhancement or New Feature
* Move env var parsing to pydantic_settings for better validation
### Under the Hood
* Add integration test for server initialization
### Bug Fix
* Fix SL validation error message when no misspellings are found

## v0.2.17 - 2025-07-18

## v0.2.16 - 2025-07-18
### Under the Hood
* Adding the ability to exclude certain tools when registering
* OpenAI responses example

## v0.2.15 - 2025-07-16
### Under the Hood
* Refactor sl tools for reusability
* Update VSCode instructions in README

## v0.2.14 - 2025-07-14
### Enhancement or New Feature
* Make dbt CLI command timeout configurable
### Bug Fix
* Allow passing entities in the group by

## v0.2.13 - 2025-07-11
### Under the Hood
* Decouple discovery tools from FastMCP

## v0.2.12 - 2025-07-09
### Bug Fix
* Catch every tool error and surface as string

## v0.2.11 - 2025-07-03
### Bug Fix
* fix order_by input

## v0.2.10 - 2025-07-03
### Enhancement or New Feature
* Upgrade MCP SDK

## v0.2.9 - 2025-07-02
### Enhancement or New Feature
* Decrease amount of data retrieved when listing models
### Under the Hood
* OpenAI conversational analytics example
* README updates
* Move Discover headers to config

## v0.2.8 - 2025-07-02
### Enhancement or New Feature
* Raise errors if no node is selected (can also be configured)
### Bug Fix
* Fix when people provide `DBT_PROJECT_DIR` as  a relative path
* Fix link in README

## v0.2.7 - 2025-06-30
### Under the Hood
* Timeout dbt list command
* Troubleshooting section in README on clients not finding uvx
* Update Discovery config for simpler usage
### Bug Fix
* Fixing bug when ordering SL query by a metric

## v0.2.6 - 2025-06-16
### Under the Hood
* Instructing the LLM to more likely use a selector
* Instruct LLM to add limit as an argument instead of SQL
* Fix use of limit in dbt show
* Indicate type checking

## v0.2.5 - 2025-06-06
### Under the Hood
* Small improvements to improve logging and code organization.
* Move `--selector` to the code instead of the prompt
* Cursor deeplink setup
* Fix Cursor deeplinks
* Fix Cursor env var mess up
### Bug Fix
* Fix Discovery API config enablement

## v0.2.4 - 2025-06-03
### Bug Fix
* Add the missing selector argument when running commands

## v0.2.3 - 2025-06-02
### Under the Hood
* Fix release action to fetch tags

## v0.2.2 - 2025-06-02
### Under the Hood
* Update README to run the MCP server with uvx
* Logging usage events
* Improve remote tools error logging
* Move create-release-tag to release Action
* Update release process documentation
### Bug Fix
* Fix typo in GH action to create release

## v0.2.1 - 2025-05-28
### Under the Hood
* Remove hatch from tag action
* Manually triggering release

## v0.2.0 - 2025-05-28
### Enhancement or New Feature
* Using `--quiet` flag to reduce context saturation of coding assistants
* Add a tool `get_model_children`
* Added optional uniqueId parameter to model lookup methods for more precise model identification
* Enable remote tools in production
* Add selector for dbt commands
* Set pre-changie value to 0.1.13
### Under the Hood
* Require changelog entries for each PR
* Log Python version in install script
* Update license to full Apache 2.0 text
* Roll back installation script and instructions
* Re-enable tests in CI
* Refactor config for modularity
* Document remote tools
* Usage tracking scaffolding
* Update docs to clarify service token permissions required
* Increase remote tools timeout
* Update release process for new versions
* Point to the correct diagram in README
* Install hatch in release process
* Remove hatch from release process
### Bug Fix
* Fix diagram according to feature set

## v0.1.3 and before
* Initial releases before using changie